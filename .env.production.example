# ChoreQuest Production Environment Configuration
# Copy this file to .env.production and fill in your actual values

# ============================================================================
# Supabase Configuration (REQUIRED)
# ============================================================================
# Get these from your Supabase instance:
#
# Option A - Local Supabase (Development):
#   Run: npx supabase status
#   API URL: http://localhost:54321
#   anon key: Copy from "anon key" output (JWT token starting with eyJ...)
#   service_role key: Copy from "service_role key" output
#
# Option B - Hosted Supabase (supabase.com):
#   1. Go to your project dashboard
#   2. Settings → API
#   3. Copy Project URL, anon/public key, and service_role key
#
# Option C - Self-Hosted Supabase (Docker):
#   1. Start Supabase: cd supabase-docker && docker compose up -d
#   2. Get keys from .env: cat supabase-docker/.env | grep -E "ANON_KEY=|SERVICE_ROLE_KEY="
#   3. Copy the JWT tokens (starting with eyJ...)
#   4. Use container name for URL: http://supabase-kong:8000
#
# ⚠️ IMPORTANT: Use "anon key" not "publishable key"
#    Correct keys are JWT tokens (3 parts, start with eyJ...)
#
# ⚠️ Docker Networking:
#    - NEXT_PUBLIC_SUPABASE_URL: Used by browser (client-side)
#    - SUPABASE_INTERNAL_URL: Used by server-side migrations (optional)
#
#    For Option C (self-hosted Docker):
#      NEXT_PUBLIC_SUPABASE_URL=http://localhost:8000  (browser needs localhost)
#      SUPABASE_INTERNAL_URL=http://supabase-kong:8000 (server uses container name)
#
#    For Option A/B (external Supabase):
#      Use the actual URL for both (e.g., localhost:54321 or supabase.com URL)

NEXT_PUBLIC_SUPABASE_URL=http://localhost:8000
SUPABASE_INTERNAL_URL=http://supabase-kong:8000  # For Option A use http://host.docker.internal:54321; for hosted Supabase use the project URL
SUPABASE_URL=http://127.0.0.1:8000  # Optional server-side fallback (tests/CLI); omit for hosted Supabase
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key-here

# Database password (Option C only - get from supabase-docker/.env POSTGRES_PASSWORD)
DB_PASSWORD=your-super-secret-and-long-postgres-password

# ============================================================================
# Application Configuration
# ============================================================================
NODE_ENV=production
PORT=3000
NEXTAUTH_URL=http://127.0.0.1:3000  # Internal URL used by cron jobs and auth callbacks
CRON_SECRET=generate-a-long-random-string-here
